# koishi-plugin-impart-pro

[![npm](https://img.shields.io/npm/v/koishi-plugin-impart-pro?style=flat-square)](https://www.npmjs.com/package/koishi-plugin-impart-pro)


# Impart-Pro 插件说明
用于模拟牛牛的成长和决斗过程，并提供排行榜等功能。

## 功能列表
| 指令             | 说明                               |
| ---------------- | ---------------------------------- |
| 开导 [@某人]     | 长牛牛                             |
| 决斗 [@某人]     | 战斗！爽~                          |
| 重开牛牛         | 牛牛很差怎么办？稳了！直接重开！   |
| 牛牛排行榜       | 查看牛牛排行榜                     |
| 看看牛牛 [@某人] | 查询自己或者别人牛牛数据           |
| 锁牛牛  [@某人]  | 开启/关闭 某人/某频道 的牛牛大作战 |

## 插件配置说明
本插件提供了许多灵活的配置选项，用户可以根据需求自定义不同的功能和行为

### 1. 牛牛设置
#### `defaultLength`
- **类型**: `tuple([Number, Number])`
- **默认值**: `[18, 45]`
- **说明**: 该字段用于定义“初始生成”的牛牛长度（单位：厘米），并且允许有一定的随机浮动。
- 具体来说，这里的 `18 ± 45%` 表示：
  - **基础长度**: 18 厘米
  - **最大偏差百分比**: 45%
  因此，牛牛的长度将在以下范围内随机生成：
  - **最大值**: $18 + 18 \times 0.45 = 18 + 8.1 = 26.1$ 厘米
  - **最小值**: $18 - 18 \times 0.45 = 18 - 8.1 = 9.9$ 厘米
  换句话说，初始生成的牛牛长度可能在 9.9 厘米到 26.1 厘米之间波动。
#### `exerciseRate`
- **类型**: `array`

- **说明**: 每个长度段位的牛牛成功锻炼的概率。举例来说，如果牛牛的长度在 0 到 100 厘米之间，锻炼成功的概率为 80%。如果长度超过 100000 厘米，锻炼就不会成功。
#### `exerciseWinGrowthRange`
- **类型**: `tuple([Number, Number])`
- **默认值**: `[10, 45]`
- **说明**: 每次锻炼成功后，牛牛长度的增长范围。以默认值 `[10, 45]` 为例，表示成功锻炼后牛牛长度增长的基数为 10 厘米，同时允许有 ±45% 的浮动：
  - **最大值**: $10 + 10 \times 0.45 = 14.5$ 厘米
  - **最小值**: $10 - 10 \times 0.45 = 5.5$ 厘米
  因此，锻炼成功时，牛牛的长度会在 5.5 厘米到 14.5 厘米之间随机增长。
#### `exerciseLossReductionRange`
- **类型**: `tuple([Number, Number])`
- **默认值**: `[12, 45]`
- **说明**: 每次锻炼失败后，牛牛长度减少的范围。与增长规则类似，默认值表示失败后长度减少的基数为 12 厘米，且允许 ±45% 的浮动。
### 2. 对决设置
#### `duelWinRateFactor`
- **类型**: `array`
- **说明**: 该设置用于控制决斗获胜概率与牛牛长度差异之间的关系。长度差值越大，胜率越小。举例来说，如果双方的牛牛长度差值在 0 到 10 厘米之间，获胜概率为 100%。如果差值超过 1000 厘米，较短的一方将没有获胜的机会。
#### `duelWinGrowthRange`
- **类型**: `tuple([Number, Number])`
- **默认值**: `[10, 50]`
- **说明**: 决斗胜利后，牛牛的长度增加范围。与锻炼类似，这里也有 ±50% 的浮动。
#### `duelLossReductionRange`
- **类型**: `tuple([Number, Number])`
- **默认值**: `[15, 50]`
- **说明**: 决斗失败后，牛牛的长度减少范围，带有 ±50% 的浮动。
---
## 其他设置
### 排行榜设置
- **`imagemode`**: 控制排行榜是否以图片形式渲染。默认启用。
- **`leaderboardPeopleNumber`**: 设置排行榜上显示的用户人数，默认为 15 人。
- **`enableAllChannel`**: 是否展示全频道的用户排名。默认关闭。
### 管理设置
- **`permissionScope`**: 设置允许触发某些操作的用户范围。可以设置为所有用户、仅管理员、群主或指定的用户。
### 货币设置
- **`currency`**: 定义插件中使用的货币单位名称，默认为 `impartpro`。
- **`maintenanceCostPerUnit`**: 定义货币与牛牛长度的转化比率。默认每 10 个货币换取 1 厘米长度。
### 调试设置
- **`loggerinfo`**: 控制是否输出调试日志信息。默认关闭。

    

## 注意事项
- 确保你已经正确配置了 Koishi 和 Impart-Pro 插件。
- 请根据你的需求调整配置项和数据库表结构。
- 如果遇到问题，请查看插件代码或寻求社区支持。
